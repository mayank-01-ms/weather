const isGPSOptionSet=localStorage.getItem("useGPS"),currentCity=localStorage.getItem("cityName");let temperatureUnit=localStorage.getItem("temperatureUnit");temperatureUnit||(temperatureUnit="C");const useGPSToggle=document.getElementById("_switch"),currentCityDiv=document.querySelector(".city"),errorMsgDiv=document.querySelector(".error_msg"),celsiusBtn=document.getElementById("C"),farenheitBtn=document.getElementById("F"),updateCityOption=document.querySelector(".update_city_option");let locationPermission=!1;navigator.geolocation&&navigator.geolocation.getCurrentPosition(()=>{locationPermission=!0}),isGPSOptionSet&&"true"==isGPSOptionSet&&(locationPermission?(useGPSToggle.checked=!0,updateCityOption.classList.add("disabled")):(errorMsgDiv.style.display="block",updateCityOption.classList.remove("disabled"))),currentCity&&(currentCityDiv.innerText=currentCity),"C"==temperatureUnit?celsiusBtn.checked=!0:farenheitBtn.checked=!0,useGPSToggle.onchange=()=>{useGPSToggle.checked?locationPermission?(localStorage.setItem("useGPS","true"),updateCityOption.classList.add("disabled")):(localStorage.setItem("useGPS","false"),useGPSToggle.checked=!1,errorMsgDiv.style.display="block",updateCityOption.classList.remove("disabled")):(localStorage.setItem("useGPS","false"),errorMsgDiv.style.display="none",updateCityOption.classList.remove("disabled"))},document.getElementById("update_city").onclick=()=>{let e=localStorage.getItem("useGPS");e&&"true"==e||(localStorage.removeItem("latitude"),localStorage.removeItem("longitude"),localStorage.removeItem("cityName"),document.location.href="/")},celsiusBtn.onchange=()=>{celsiusBtn.checked=!0,localStorage.setItem("temperatureUnit","C")},farenheitBtn.onchange=()=>{farenheitBtn.checked=!0,localStorage.setItem("temperatureUnit","F")};
